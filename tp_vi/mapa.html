<html lang="en">
    <head>
       <meta charset="utf-8">
       <title>Haciendo un Mapa D3</title>
       <!-- <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
       <script type="text/javascript" src="http://d3js.org/topojson.v1.min.js"></script>
<script type="text/javascript" src="http://d3js.org/queue.v1.min.js"></script> -->
       <script type="text/javascript" src="js/d3.v3.min.js"></script>
       <script type="text/javascript" src="js/topojson.v1.min.js"></script>
<script type="text/javascript" src="js/queue.v1.min.js"></script> 
       <style type="text/css">	

.states {
  fill: #ccc;
  stroke: #fff;
}

.symbol {
  fill: steelblue;
  fill-opacity: .8;
  stroke: #fff;
}
path {
	  stroke: white;
	    stroke-width: 0.25px;
	      fill: grey;
      }
.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}		
		</style>
	</head>
	<body >
	<h2> Mapa </h2>
<script type="text/javascript">

var width = 1000,
    height = 1000;

var radius = d3.scale.sqrt()
    .domain([0, 1e6])
    .range([0, 10]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);


/* d3.json("salidaprovincias.topojson", function(error, uk) { */

var projection = d3.geo.mercator()
       .center([-80, -35 ])
       .scale(900);
//	    .rotate([-180,0]);

var path = d3.geo.path()
       .projection(projection);

queue()
    .defer(d3.json, "argentina.topojson")
    .defer(d3.json, "centroide_provincia.geojson")
    .await(ready);

function ready(error, us, centroid) {
  console.log(us.objects);
  svg.append("path")
      .attr("class", "states")
      .datum(topojson.feature(us, us.objects.ARG_adm2))
      .attr("d", path);

  svg.selectAll(".symbol")
      .data(centroid.features.sort(function(a, b) { console.log(a); return b.properties.population - a.properties.population; }))
    .enter().append("path")
      .attr("class", "symbol")
      .attr("d", path.pointRadius(function(d) { return radius(d.properties.population); }));  
} 


/* svg.append("path")
     .datum(topojson.feature(uk, uk.objects.provincias))
     .attr("d", path); */

/*}); */


/*
var width = 960,
    height = 500;

var radius = d3.scale.sqrt()
    .domain([0, 1e6])
    .range([0, 10]);

var path = d3.geo.path();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

queue()
    .defer(d3.json, "salidaprovincias.topojson")
    .defer(d3.json, "us-state-centroids.json")
    .await(ready);

function ready(error, us, centroid) {
  console.log(us);
  svg.append("path")
      .attr("class", "states")
      .datum(topojson.feature(us, us.objects.provincias))
      .attr("d", path);

  svg.selectAll(".symbol")
      .data(centroid.features.sort(function(a, b) { return b.properties.population - a.properties.population; }))
    .enter().append("path")
      .attr("class", "symbol")
      .attr("d", path.pointRadius(function(d) { return radius(d.properties.population); }));
}
*/

</script>
</body>
</html>
